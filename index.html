<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Card Benefit Tracker</title>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-1HM9DXGSP7');
    </script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Add Tailwind config -->
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              chase: '#1e40af',
              united: '#0369a1',
              amex: '#4b5563',
            }
          }
        }
      }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Remove inline styles -->
    <!-- <style> ... </style> -->

    <!-- Add link to external CSS -->
    <link rel="stylesheet" href="css/styles.css">

</head>
<body>
    <div id="root"></div>

    <!-- Include separate JavaScript files -->
    <script type="text/babel" src="js/data.js"></script>
    <script type="text/babel" src="js/utils.js"></script>
    <script type="text/babel" src="js/components.js"></script>
    <script type="text/babel" src="js/app.js"></script>

    <script type="text/babel">
        // Data definitions
        const BENEFIT_FREQUENCY = {
            MONTHLY: 'monthly',
            SEMI_ANNUAL: 'semi_annual',
            ANNUAL: 'annual',
            FOUR_YEAR: 'four_year',
            ONE_TIME: 'one_time'
        };

        const BENEFIT_TYPE = {
            CREDIT: 'credit',
            SUBSCRIPTION: 'subscription',
            FEATURE: 'feature',
            ONE_TIME: 'one_time'
        };

        const BENEFIT_CATEGORY = {
            TRAVEL: 'travel',
            DINING: 'dining',
            ENTERTAINMENT: 'entertainment',
            SHOPPING: 'shopping',
            RIDESHARE: 'rideshare',
            LOUNGE: 'lounge',
            INSURANCE: 'insurance',
            CUSTOM: 'custom'
        };

        // Available credit cards database organized by issuer
        const availableCards = {
            // === CHASE ===
            'chase-sapphire-reserve': {
                id: 'chase-sapphire-reserve',
                name: 'Chase Sapphire Reserve',
                issuer: 'Chase',
                annualFee: 795,
                color: 'card-gradient-chase',
                benefits: [
                    {
                        id: 'csr-travel-credit',
                        name: '$300 Travel Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 300,
                        description: 'Annual travel credit for flights, hotels, car rentals, and more',
                        used: false
                    },
                    {
                        id: 'csr-doordash',
                        name: 'DoorDash DashPass',
                        category: BENEFIT_CATEGORY.DINING,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.SUBSCRIPTION,
                        value: 420,
                        description: 'DashPass membership + up to $25 monthly credits ($300/year) (activate by Dec 2027)',
                        subscribed: false
                    },
                    {
                        id: 'csr-stubhub',
                        name: '$300 StubHub/Viagogo Credit',
                        category: BENEFIT_CATEGORY.ENTERTAINMENT,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 300,
                        description: 'Up to $300 annual event ticket credit ($150 Jan-Jun, $150 Jul-Dec)',
                        used: false
                    },
                    {
                        id: 'csr-hotel-jan',
                        name: '$250 The Edit Hotel (Jan-Jun)',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.SEMI_ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 250,
                        description: 'Semi-annual hotel credit for The Edit properties',
                        used: false
                    },
                    {
                        id: 'csr-hotel-jul',
                        name: '$250 The Edit Hotel (Jul-Dec)',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.SEMI_ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 250,
                        description: 'Semi-annual hotel credit for The Edit properties',
                        used: false
                    },
                    {
                        id: 'csr-dining-jan',
                        name: '$150 Dining Credit (Jan-Jun)',
                        category: BENEFIT_CATEGORY.DINING,
                        frequency: BENEFIT_FREQUENCY.SEMI_ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 150,
                        description: 'Semi-annual dining credit at Sapphire Reserve Exclusive Tables (activation required)',
                        used: false
                    },
                    {
                        id: 'csr-dining-jul',
                        name: '$150 Dining Credit (Jul-Dec)',
                        category: BENEFIT_CATEGORY.DINING,
                        frequency: BENEFIT_FREQUENCY.SEMI_ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 150,
                        description: 'Semi-annual dining credit at Sapphire Reserve Exclusive Tables (activation required)',
                        used: false
                    },
                    {
                        id: 'csr-lyft',
                        name: '$10 Lyft Credit',
                        category: BENEFIT_CATEGORY.RIDESHARE,
                        frequency: BENEFIT_FREQUENCY.MONTHLY,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 10,
                        description: 'Monthly Lyft ride credit (through Sept 2027)',
                        used: false
                    },
                    {
                        id: 'csr-peloton',
                        name: '$10 Peloton Credit',
                        category: BENEFIT_CATEGORY.SHOPPING,
                        frequency: BENEFIT_FREQUENCY.MONTHLY,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 10,
                        description: 'Monthly Peloton membership credit (activation required)',
                        used: false
                    },
                    {
                        id: 'csr-apple',
                        name: '$250 Apple TV+ & Music',
                        category: BENEFIT_CATEGORY.ENTERTAINMENT,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.SUBSCRIPTION,
                        value: 250,
                        description: 'Complimentary Apple TV+ and Apple Music subscriptions through Jun 2027',
                        subscribed: false
                    },
                    {
                        id: 'csr-tsa',
                        name: 'TSA PreCheck/Global Entry',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.FOUR_YEAR,
                        type: BENEFIT_TYPE.ONE_TIME,
                        value: 120,
                        description: '$120 credit every 4 years',
                        used: false
                    },
                    {
                        id: 'csr-priority-pass',
                        name: 'Priority Pass + Lounges',
                        category: BENEFIT_CATEGORY.LOUNGE,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 429,
                        description: 'Unlimited lounge access',
                        activated: true
                    }
                ]
            },
            'chase-sapphire-preferred': {
                id: 'chase-sapphire-preferred',
                name: 'Chase Sapphire Preferred',
                issuer: 'Chase',
                annualFee: 95,
                color: 'card-gradient-chase',
                benefits: [
                    {
                        id: 'csp-hotel-credit',
                        name: '$50 Hotel Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 50,
                        description: 'Annual hotel credit through Chase Travel',
                        used: false
                    }
                ]
            },
            'united-quest': {
                id: 'united-quest',
                name: 'United Quest',
                issuer: 'Chase',
                annualFee: 350,
                color: 'card-gradient-united',
                benefits: [
                    {
                        id: 'uq-travel-bank',
                        name: '$200 United TravelBank',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 200,
                        description: 'Annual United travel credit',
                        used: false
                    },
                    {
                        id: 'uq-hotel-credit',
                        name: '$150 Renowned Hotels',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 150,
                        description: 'Annual hotel credit',
                        used: false
                    },
                    {
                        id: 'uq-jsx',
                        name: '$150 JSX Flights',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 150,
                        description: 'Annual JSX flight credit',
                        used: false
                    },
                    {
                        id: 'uq-instacart-10',
                        name: '$10 Instacart Credit',
                        category: BENEFIT_CATEGORY.SHOPPING,
                        frequency: BENEFIT_FREQUENCY.MONTHLY,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 10,
                        description: 'Monthly Instacart credit',
                        used: false
                    },
                    {
                        id: 'uq-instacart-5',
                        name: '$5 Instacart Credit',
                        category: BENEFIT_CATEGORY.SHOPPING,
                        frequency: BENEFIT_FREQUENCY.MONTHLY,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 5,
                        description: 'Additional monthly Instacart credit',
                        used: false
                    },
                    {
                        id: 'uq-rideshare',
                        name: '$8 Rideshare Credit',
                        category: BENEFIT_CATEGORY.RIDESHARE,
                        frequency: BENEFIT_FREQUENCY.MONTHLY,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 8,
                        description: 'Monthly rideshare credit ($12 in December)',
                        used: false
                    },
                    {
                        id: 'uq-avis-budget',
                        name: '$80 Avis/Budget',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 80,
                        description: 'Annual car rental credits',
                        used: false
                    },
                    {
                        id: 'uq-tsa',
                        name: 'TSA PreCheck/Global Entry',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.FOUR_YEAR,
                        type: BENEFIT_TYPE.ONE_TIME,
                        value: 120,
                        description: '$120 credit every 4 years',
                        used: false
                    },
                    {
                        id: 'uq-checked-bags',
                        name: '2 Free Checked Bags',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 360,
                        description: 'Save up to $360/year on bag fees',
                        activated: true
                    }
                ]
            },
            'world-of-hyatt': {
                id: 'world-of-hyatt',
                name: 'World of Hyatt Credit Card',
                issuer: 'Chase',
                annualFee: 95,
                color: 'card-gradient-chase',
                benefits: [
                    {
                        id: 'hyatt-free-night',
                        name: 'Free Night Award',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 150,
                        description: 'Annual free night at Category 1-4 Hyatt hotels',
                        used: false
                    },
                    {
                        id: 'hyatt-elite-status',
                        name: 'Discoverist Elite Status',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 200,
                        description: 'Automatic Hyatt elite status',
                        activated: true
                    }
                ]
            },
            'ihg-one-rewards': {
                id: 'ihg-one-rewards',
                name: 'IHG One Rewards Premier',
                issuer: 'Chase',
                annualFee: 89,
                color: 'card-gradient-chase',
                benefits: [
                    {
                        id: 'ihg-free-night',
                        name: 'Free Night Award',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 100,
                        description: 'Annual free night at IHG hotels',
                        used: false
                    },
                    {
                        id: 'ihg-elite-status',
                        name: 'Platinum Elite Status',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 150,
                        description: 'Automatic IHG elite status',
                        activated: true
                    }
                ]
            },
            
            // === AMERICAN EXPRESS ===
            'amex-platinum': {
                id: 'amex-platinum',
                name: 'The Platinum Card',
                issuer: 'American Express',
                annualFee: 695,
                color: 'card-gradient-amex',
                benefits: [
                    {
                        id: 'amex-airline',
                        name: '$200 Airline Fee Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 200,
                        description: 'Selected airline incidental fees',
                        used: false
                    },
                    {
                        id: 'amex-hotel',
                        name: '$200 Hotel Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 200,
                        description: 'Fine Hotels + Resorts or Hotel Collection',
                        used: false
                    },
                    {
                        id: 'amex-uber',
                        name: '$15 Uber Cash',
                        category: BENEFIT_CATEGORY.RIDESHARE,
                        frequency: BENEFIT_FREQUENCY.MONTHLY,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 15,
                        description: 'Monthly Uber credit ($35 in December)',
                        used: false
                    },
                    {
                        id: 'amex-entertainment',
                        name: '$20 Digital Entertainment',
                        category: BENEFIT_CATEGORY.ENTERTAINMENT,
                        frequency: BENEFIT_FREQUENCY.MONTHLY,
                        type: BENEFIT_TYPE.SUBSCRIPTION,
                        value: 20,
                        description: 'Disney+, Hulu, ESPN+, NYT, WSJ, Peacock',
                        subscribed: false
                    },
                    {
                        id: 'amex-saks-jan',
                        name: '$50 Saks (Jan-Jun)',
                        category: BENEFIT_CATEGORY.SHOPPING,
                        frequency: BENEFIT_FREQUENCY.SEMI_ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 50,
                        description: 'Semi-annual Saks Fifth Avenue credit',
                        used: false
                    },
                    {
                        id: 'amex-saks-jul',
                        name: '$50 Saks (Jul-Dec)',
                        category: BENEFIT_CATEGORY.SHOPPING,
                        frequency: BENEFIT_FREQUENCY.SEMI_ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 50,
                        description: 'Semi-annual Saks Fifth Avenue credit',
                        used: false
                    },
                    {
                        id: 'amex-tsa',
                        name: 'TSA PreCheck/Global Entry',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.FOUR_YEAR,
                        type: BENEFIT_TYPE.ONE_TIME,
                        value: 100,
                        description: '$100 credit every 4 years',
                        used: false
                    },
                    {
                        id: 'amex-centurion',
                        name: 'Centurion Lounges',
                        category: BENEFIT_CATEGORY.LOUNGE,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 500,
                        description: 'Unlimited Centurion Lounge access',
                        activated: true
                    },
                    {
                        id: 'amex-walmart',
                        name: 'Walmart+ Membership',
                        category: BENEFIT_CATEGORY.SHOPPING,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.SUBSCRIPTION,
                        value: 155,
                        description: 'Complimentary Walmart+ membership',
                        subscribed: false
                    }
                ]
            },
            'amex-gold': {
                id: 'amex-gold',
                name: 'Gold Card',
                issuer: 'American Express',
                annualFee: 325,
                color: 'card-gradient-amex',
                benefits: [
                    {
                        id: 'amex-gold-dining',
                        name: '$120 Dining Credit',
                        category: BENEFIT_CATEGORY.DINING,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 120,
                        description: '$10/month at Grubhub, The Cheesecake Factory, and others',
                        used: false
                    },
                    {
                        id: 'amex-gold-uber',
                        name: '$120 Uber Cash',
                        category: BENEFIT_CATEGORY.RIDESHARE,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 120,
                        description: '$10/month Uber credit',
                        used: false
                    },
                    {
                        id: 'amex-gold-resy',
                        name: '$100 Resy Credit',
                        category: BENEFIT_CATEGORY.DINING,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 100,
                        description: 'Annual Resy credit',
                        used: false
                    }
                ]
            },
            'amex-green': {
                id: 'amex-green',
                name: 'Green Card',
                issuer: 'American Express',
                annualFee: 150,
                color: 'card-gradient-amex',
                benefits: [
                    {
                        id: 'amex-green-clear',
                        name: 'CLEAR Plus Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 189,
                        description: 'Annual CLEAR Plus membership credit',
                        used: false
                    },
                    {
                        id: 'amex-green-lounge',
                        name: 'LoungeBuddy Credits',
                        category: BENEFIT_CATEGORY.LOUNGE,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 100,
                        description: '$100 in LoungeBuddy credits',
                        used: false
                    }
                ]
            },
            'amex-business-platinum': {
                id: 'amex-business-platinum',
                name: 'Business Platinum Card',
                issuer: 'American Express',
                annualFee: 695,
                color: 'card-gradient-amex',
                benefits: [
                    {
                        id: 'amex-biz-airline',
                        name: '$200 Airline Fee Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 200,
                        description: 'Selected airline incidental fees',
                        used: false
                    },
                    {
                        id: 'amex-biz-dell',
                        name: '$400 Dell Credit',
                        category: BENEFIT_CATEGORY.SHOPPING,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 400,
                        description: '$200 semi-annual Dell credit',
                        used: false
                    },
                    {
                        id: 'amex-biz-adobe',
                        name: '$150 Adobe Credit',
                        category: BENEFIT_CATEGORY.SHOPPING,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 150,
                        description: 'Annual Adobe Creative Cloud credit',
                        used: false
                    },
                    {
                        id: 'amex-biz-wireless',
                        name: '$120 Wireless Credit',
                        category: BENEFIT_CATEGORY.SHOPPING,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 120,
                        description: '$10/month wireless credit',
                        used: false
                    }
                ]
            },
            'amex-marriott-brilliant': {
                id: 'amex-marriott-brilliant',
                name: 'Marriott Bonvoy Brilliant',
                issuer: 'American Express',
                annualFee: 650,
                color: 'card-gradient-amex',
                benefits: [
                    {
                        id: 'marriott-free-night',
                        name: 'Free Night Award',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 350,
                        description: 'Annual free night up to 85,000 points',
                        used: false
                    },
                    {
                        id: 'marriott-dining',
                        name: '$300 Marriott Dining Credit',
                        category: BENEFIT_CATEGORY.DINING,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 300,
                        description: 'Annual dining credit at Marriott properties',
                        used: false
                    },
                    {
                        id: 'marriott-gold-status',
                        name: 'Gold Elite Status',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 200,
                        description: 'Automatic Marriott Gold elite status',
                        activated: true
                    }
                ]
            },
            'amex-hilton-aspire': {
                id: 'amex-hilton-aspire',
                name: 'Hilton Honors Aspire',
                issuer: 'American Express',
                annualFee: 450,
                color: 'card-gradient-amex',
                benefits: [
                    {
                        id: 'hilton-resort-credit',
                        name: '$250 Resort Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 250,
                        description: 'Annual resort credit at Hilton properties',
                        used: false
                    },
                    {
                        id: 'hilton-airline',
                        name: '$100 Airline Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 100,
                        description: 'Annual airline incidental credit',
                        used: false
                    },
                    {
                        id: 'hilton-free-night',
                        name: 'Free Weekend Night',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 200,
                        description: 'Annual free weekend night award',
                        used: false
                    },
                    {
                        id: 'hilton-diamond-status',
                        name: 'Diamond Elite Status',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 300,
                        description: 'Automatic Hilton Diamond elite status',
                        activated: true
                    }
                ]
            },
            'amex-delta-reserve': {
                id: 'amex-delta-reserve',
                name: 'Delta SkyMiles Reserve',
                issuer: 'American Express',
                annualFee: 650,
                color: 'card-gradient-amex',
                benefits: [
                    {
                        id: 'delta-companion',
                        name: 'Companion Certificate',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 400,
                        description: 'Annual domestic companion certificate',
                        used: false
                    },
                    {
                        id: 'delta-sky-club',
                        name: 'Sky Club Access',
                        category: BENEFIT_CATEGORY.LOUNGE,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 545,
                        description: 'Delta Sky Club membership',
                        activated: true
                    },
                    {
                        id: 'delta-mqds',
                        name: 'MQD Waiver',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 200,
                        description: 'Medallion Qualifying Dollar waiver',
                        activated: true
                    }
                ]
            },
            
            // === CAPITAL ONE ===
            'capital-one-venture-x': {
                id: 'capital-one-venture-x',
                name: 'Venture X Rewards',
                issuer: 'Capital One',
                annualFee: 395,
                color: 'card-gradient-chase',
                benefits: [
                    {
                        id: 'venture-x-travel',
                        name: '$300 Travel Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 300,
                        description: 'Annual travel credit through Capital One Travel',
                        used: false
                    },
                    {
                        id: 'venture-x-tsa',
                        name: 'TSA PreCheck/Global Entry',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.FOUR_YEAR,
                        type: BENEFIT_TYPE.ONE_TIME,
                        value: 100,
                        description: '$100 credit every 4 years',
                        used: false
                    },
                    {
                        id: 'venture-x-lounge',
                        name: 'Priority Pass + Plaza Premium',
                        category: BENEFIT_CATEGORY.LOUNGE,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 429,
                        description: 'Unlimited lounge access',
                        activated: true
                    },
                    {
                        id: 'venture-x-anniversary',
                        name: 'Anniversary Bonus',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 100,
                        description: '10,000 miles anniversary bonus',
                        used: false
                    }
                ]
            },
            'capital-one-venture': {
                id: 'capital-one-venture',
                name: 'Venture Rewards',
                issuer: 'Capital One',
                annualFee: 95,
                color: 'card-gradient-chase',
                benefits: [
                    {
                        id: 'venture-tsa',
                        name: 'TSA PreCheck/Global Entry',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.FOUR_YEAR,
                        type: BENEFIT_TYPE.ONE_TIME,
                        value: 100,
                        description: '$100 credit every 4 years',
                        used: false
                    }
                ]
            },
            'capital-one-savor': {
                id: 'capital-one-savor',
                name: 'Savor Cash Rewards',
                issuer: 'Capital One',
                annualFee: 95,
                color: 'card-gradient-chase',
                benefits: [
                    {
                        id: 'savor-uber',
                        name: '$100 Uber Cash',
                        category: BENEFIT_CATEGORY.RIDESHARE,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 100,
                        description: 'Annual Uber Cash credit',
                        used: false
                    }
                ]
            },
            
            // === CITI ===
            'citi-prestige': {
                id: 'citi-prestige',
                name: 'Prestige Card',
                issuer: 'Citi',
                annualFee: 495,
                color: 'card-gradient-united',
                benefits: [
                    {
                        id: 'prestige-travel-credit',
                        name: '$250 Travel Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 250,
                        description: 'Annual travel credit',
                        used: false
                    },
                    {
                        id: 'prestige-golf',
                        name: '$100 Golf Credit',
                        category: BENEFIT_CATEGORY.ENTERTAINMENT,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 100,
                        description: 'Annual golf credit',
                        used: false
                    },
                    {
                        id: 'prestige-lounge',
                        name: 'Priority Pass Select',
                        category: BENEFIT_CATEGORY.LOUNGE,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 429,
                        description: 'Unlimited Priority Pass lounge access',
                        activated: true
                    }
                ]
            },
            'citi-premier': {
                id: 'citi-premier',
                name: 'Premier Card',
                issuer: 'Citi',
                annualFee: 95,
                color: 'card-gradient-united',
                benefits: [
                    {
                        id: 'premier-hotel',
                        name: '$100 Hotel Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 100,
                        description: 'Annual hotel credit',
                        used: false
                    }
                ]
            },
            'citi-aadvantage-executive': {
                id: 'citi-aadvantage-executive',
                name: 'AAdvantage Executive',
                issuer: 'Citi',
                annualFee: 450,
                color: 'card-gradient-united',
                benefits: [
                    {
                        id: 'aa-companion',
                        name: 'Companion Certificate',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 400,
                        description: 'Annual companion certificate',
                        used: false
                    },
                    {
                        id: 'aa-admirals-club',
                        name: 'Admirals Club Access',
                        category: BENEFIT_CATEGORY.LOUNGE,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 650,
                        description: 'Admirals Club membership',
                        activated: true
                    }
                ]
            },
            
            // === WELLS FARGO ===
            'wells-fargo-autograph': {
                id: 'wells-fargo-autograph',
                name: 'Autograph Card',
                issuer: 'Wells Fargo',
                annualFee: 0,
                color: 'card-gradient-united',
                benefits: [
                    {
                        id: 'autograph-cell-phone',
                        name: 'Cell Phone Protection',
                        category: BENEFIT_CATEGORY.INSURANCE,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.FEATURE,
                        value: 600,
                        description: 'Cell phone protection insurance',
                        activated: true
                    }
                ]
            },
            
            // === BANK OF AMERICA ===
            'bofa-premium-rewards': {
                id: 'bofa-premium-rewards',
                name: 'Premium Rewards Card',
                issuer: 'Bank of America',
                annualFee: 95,
                color: 'card-gradient-united',
                benefits: [
                    {
                        id: 'bofa-airline',
                        name: '$100 Airline Credit',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.ANNUAL,
                        type: BENEFIT_TYPE.CREDIT,
                        value: 100,
                        description: 'Annual airline incidental credit',
                        used: false
                    },
                    {
                        id: 'bofa-tsa',
                        name: 'TSA PreCheck/Global Entry',
                        category: BENEFIT_CATEGORY.TRAVEL,
                        frequency: BENEFIT_FREQUENCY.FOUR_YEAR,
                        type: BENEFIT_TYPE.ONE_TIME,
                        value: 100,
                        description: '$100 credit every 4 years',
                        used: false
                    }
                ]
            }
        };

        // Helper functions for custom cards
        function generateCustomCardId() {
            return `custom-card-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
        }

        function generateCustomBenefitId() {
            return `custom-benefit-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
        }

        function createCustomCard(cardData) {
            return {
                id: generateCustomCardId(),
                name: cardData.name || 'Custom Card',
                issuer: cardData.issuer || 'Custom',
                annualFee: cardData.annualFee || 0,
                color: cardData.color || 'card-gradient-custom',
                isCustom: true,
                benefits: cardData.benefits || []
            };
        }

        function createCustomBenefit(benefitData) {
            return {
                id: generateCustomBenefitId(),
                name: benefitData.name || 'Custom Benefit',
                category: benefitData.category || BENEFIT_CATEGORY.CUSTOM,
                frequency: benefitData.frequency || BENEFIT_FREQUENCY.ANNUAL,
                type: benefitData.type || BENEFIT_TYPE.CREDIT,
                value: benefitData.value || 0,
                description: benefitData.description || '',
                used: false,
                subscribed: false,
                activated: benefitData.type === BENEFIT_TYPE.FEATURE
            };
        }

        // Helper function to get current benefit amount based on date
        const getCurrentBenefitAmount = (benefit, frequency) => {
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            
            switch (frequency) {
                case BENEFIT_FREQUENCY.SEMI_ANNUAL:
                    // For semi-annual benefits, return half the value
                    if (benefit.name.includes('Jan-Jun') && currentMonth >= 6) {
                        return 0; // This period has passed
                    }
                    if (benefit.name.includes('Jul-Dec') && currentMonth < 6) {
                        return 0; // This period hasn't started
                    }
                    return benefit.value;
                case BENEFIT_FREQUENCY.ANNUAL:
                    // For annual benefits that accumulate monthly
                    if (benefit.name === '$300 StubHub/Viagogo Credit') {
                        // $25 per month
                        return Math.min(25 * (currentMonth + 1), 300);
                    }
                    return benefit.value;
                case BENEFIT_FREQUENCY.FOUR_YEAR:
                    // TSA PreCheck is $120 every 4 years, not annual
                    return benefit.value;
                default:
                    return benefit.value;
            }
        };

        // Helper functions
        const getExpirationDate = (frequency) => {
            const now = new Date();
            const currentYear = now.getFullYear();
            const currentMonth = now.getMonth();
            
            switch (frequency) {
                case BENEFIT_FREQUENCY.MONTHLY:
                    return new Date(currentYear, currentMonth + 1, 0);
                case BENEFIT_FREQUENCY.SEMI_ANNUAL:
                    if (currentMonth < 6) {
                        return new Date(currentYear, 5, 30);
                    } else {
                        return new Date(currentYear, 11, 31);
                    }
                case BENEFIT_FREQUENCY.ANNUAL:
                    return new Date(currentYear, 11, 31);
                case BENEFIT_FREQUENCY.FOUR_YEAR:
                    return new Date(currentYear + 4, 11, 31);
                default:
                    return new Date(currentYear, 11, 31);
            }
        };

        const daysUntilExpiration = (expirationDate) => {
            const now = new Date();
            const expiry = new Date(expirationDate);
            const diffTime = expiry - now;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays;
        };

        const formatCurrency = (amount) => {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        };

        const { useState, useEffect } = React;


        // Components
        function BenefitCard({ benefit, cardId, cardName, onToggle, onUndo, isRecentlyUsed, isUndoableUsed, viewMode = 'card' }) {
            const expirationDate = getExpirationDate(benefit.frequency);
            const daysLeft = daysUntilExpiration(expirationDate);
            const currentAmount = getCurrentBenefitAmount(benefit, benefit.frequency);
            
            let expirationColor = 'text-gray-600';
            let expirationBg = 'bg-gray-100';
            if (daysLeft <= 7) {
                expirationColor = 'text-red-600';
                expirationBg = 'bg-red-100';
            } else if (daysLeft <= 30) {
                expirationColor = 'text-orange-600';
                expirationBg = 'bg-orange-100';
            }

            const categoryIcons = {
                [BENEFIT_CATEGORY.TRAVEL]: 'âœˆï¸',
                [BENEFIT_CATEGORY.DINING]: 'ðŸ½ï¸',
                [BENEFIT_CATEGORY.ENTERTAINMENT]: 'ðŸŽ­',
                [BENEFIT_CATEGORY.SHOPPING]: 'ðŸ›ï¸',
                [BENEFIT_CATEGORY.RIDESHARE]: 'ðŸš—',
                [BENEFIT_CATEGORY.LOUNGE]: 'ðŸ›‹ï¸',
                [BENEFIT_CATEGORY.INSURANCE]: 'ðŸ›¡ï¸'
            };

            const isUsed = benefit.used || benefit.subscribed || benefit.activated;

            // Don't show in unused view if it's used or if it's a feature that's always active
            if (viewMode === 'unused' && (isUsed || benefit.type === BENEFIT_TYPE.FEATURE)) {
                return null;
            }

            // Don't show expired semi-annual benefits
            if (benefit.frequency === BENEFIT_FREQUENCY.SEMI_ANNUAL && currentAmount === 0) {
                return null;
            }

            const renderButton = () => {
                if (benefit.type === BENEFIT_TYPE.FEATURE) {
                    return (
                        <span className="text-sm text-green-600 font-medium">
                            âœ“ Active
                        </span>
                    );
                }

                if (benefit.type === BENEFIT_TYPE.SUBSCRIPTION) {
                    return (
                        <div className="flex gap-2">
                            <button
                                onClick={() => onToggle(cardId, benefit.id)}
                                className={`px-3 py-1 rounded-md text-sm font-medium transition-colors ${
                                    benefit.subscribed
                                        ? 'bg-green-600 text-white hover:bg-green-700'
                                        : 'bg-blue-600 text-white hover:bg-blue-700'
                                }`}
                            >
                                {benefit.subscribed ? 'Subscribed' : 'Subscribe'}
                            </button>
                            {isUndoableUsed && benefit.subscribed && (
                                <button
                                    onClick={() => onUndo(cardId, benefit.id)}
                                    className="px-3 py-1 rounded-md text-sm font-medium bg-gray-500 text-white hover:bg-gray-600 transition-colors"
                                >
                                    Undo
                                </button>
                            )}
                        </div>
                    );
                }

                return (
                    <div className="flex gap-2">
                        <button
                            onClick={() => onToggle(cardId, benefit.id)}
                            className={`px-3 py-1 rounded-md text-sm font-medium transition-colors ${
                                benefit.used
                                    ? 'bg-gray-200 text-gray-500 cursor-not-allowed'
                                    : 'bg-blue-600 text-white hover:bg-blue-700'
                            }`}
                            disabled={benefit.used}
                        >
                            {benefit.used ? 'Used' : 'Mark Used'}
                        </button>
                        {isUndoableUsed && benefit.used && (
                            <button
                                onClick={() => onUndo(cardId, benefit.id)}
                                className="px-3 py-1 rounded-md text-sm font-medium bg-gray-500 text-white hover:bg-gray-600 transition-colors"
                            >
                                Undo
                            </button>
                        )}
                    </div>
                );
            };

            if (viewMode === 'list') {
                return (
                    <tr className={`border-b dark:border-slate-700 ${isUsed ? 'bg-slate-50 dark:bg-slate-900' : 'hover:bg-slate-50 dark:hover:bg-slate-900'}`}>
                        <td className="py-3 px-6">
                            <div className="flex items-center gap-3">
                                <div className="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm">
                                    {categoryIcons[benefit.category]}
                                </div>
                                <div>
                                    <div className="font-medium text-slate-900 dark:text-slate-100">{benefit.name}</div>
                                    <div className="text-sm text-slate-600 dark:text-slate-400">{benefit.description}</div>
                                </div>
                            </div>
                        </td>
                        <td className="py-3 px-6 text-sm font-medium text-slate-700 dark:text-slate-300">{cardName}</td>
                        <td className="py-3 px-6">
                            <span className={`text-xs px-2 py-1 rounded-full ${expirationBg} ${expirationColor} font-medium`}>
                                {daysLeft > 0 ? `${daysLeft} days` : 'Expired'}
                            </span>
                        </td>
                        <td className="py-3 px-6 text-sm font-medium text-slate-900 dark:text-slate-100">
                            {benefit.type === BENEFIT_TYPE.CREDIT && benefit.frequency !== BENEFIT_FREQUENCY.FOUR_YEAR 
                                ? formatCurrency(currentAmount) 
                                : formatCurrency(benefit.value)}
                        </td>
                        <td className="py-3 px-6 text-right">{renderButton()}</td>
                    </tr>
                );
            }

            return (
                <div className={`benefit-card bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-slate-200/50 dark:border-slate-700/50 ${isUsed ? 'opacity-60' : ''} hover:shadow-2xl transition-all duration-300`}>
                    <div className="flex items-start justify-between mb-4">
                        <div className="flex-1">
                            <div className="flex items-center gap-3 mb-2">
                                <div className="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-lg">
                                    {categoryIcons[benefit.category]}
                                </div>
                                <div>
                                    <h4 className="font-semibold text-slate-900 dark:text-slate-100 text-lg">{benefit.name}</h4>
                                    <p className="text-sm text-slate-600 dark:text-slate-400">{benefit.description}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div className="flex items-center justify-between pt-4 border-t border-slate-100 dark:border-slate-700">
                        <div className="flex items-center gap-4">
                            <span className={`text-xs px-3 py-1 rounded-full ${expirationBg} ${expirationColor} font-medium`}>
                                {daysLeft > 0 ? `${daysLeft} days left` : 'Expired'}
                            </span>
                            {benefit.type === BENEFIT_TYPE.CREDIT && benefit.frequency !== BENEFIT_FREQUENCY.FOUR_YEAR && (
                                <span className="text-lg font-bold text-green-600 dark:text-green-400">
                                    {formatCurrency(currentAmount)}
                                </span>
                            )}
                            {benefit.frequency === BENEFIT_FREQUENCY.FOUR_YEAR && (
                                <span className="text-lg font-bold text-green-600 dark:text-green-400">
                                    {formatCurrency(benefit.value)}
                                </span>
                            )}
                        </div>
                        
                        {renderButton()}
                    </div>
                </div>
            );
        }

        function CreditCardSection({ card, onToggle, onRemove, onUndo, recentlyUsed, undoableUsed }) {
            return (
                <div className="mb-8">
                    <div className={`${card.color} text-white rounded-t-xl p-8 relative overflow-hidden`}>
                        <div className="absolute inset-0 bg-gradient-to-r from-white/10 to-transparent"></div>
                        <div className="relative z-10 flex justify-between items-start">
                            <div>
                                <h2 className="text-3xl font-bold mb-2">{card.name}</h2>
                                <p className="text-white/90 text-lg">{card.issuer}</p>
                                <p className="text-white/80 text-sm mt-1">Annual Fee: {formatCurrency(card.annualFee)}</p>
                            </div>
                            <button
                                onClick={() => onRemove(card.id)}
                                className="text-white/80 hover:text-white transition-colors p-2 rounded-full hover:bg-white/20"
                                title="Remove card"
                            >
                                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div className="bg-white dark:bg-slate-800 rounded-b-xl p-6 shadow-lg border-x border-b border-slate-200 dark:border-slate-700">
                        <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
                            {card.benefits.map(benefit => (
                                <BenefitCard
                                    key={benefit.id}
                                    benefit={benefit}
                                    cardId={card.id}
                                    cardName={card.name}
                                    onToggle={onToggle}
                                    onUndo={onUndo}
                                    isRecentlyUsed={recentlyUsed.has(benefit.id)}
                                    isUndoableUsed={undoableUsed.has(benefit.id)}
                                />
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        // Add Card Page Component
        function AddCardPage({ onAddCard, onBack, existingCardIds }) {
            const [selectedCards, setSelectedCards] = useState(new Set());
            
            // Group cards by issuer
            const groupedCards = Object.values(availableCards).reduce((acc, card) => {
                if (!existingCardIds.includes(card.id)) {
                    if (!acc[card.issuer]) {
                        acc[card.issuer] = [];
                    }
                    acc[card.issuer].push(card);
                }
                return acc;
            }, {});
            
            const handleCardToggle = (cardId) => {
                const newSelected = new Set(selectedCards);
                if (newSelected.has(cardId)) {
                    newSelected.delete(cardId);
                } else {
                    newSelected.add(cardId);
                }
                setSelectedCards(newSelected);
            };
            
            const handleAddSelected = () => {
                selectedCards.forEach(cardId => onAddCard(cardId));
                setSelectedCards(new Set());
                onBack();
            };
            
            const totalBenefitValue = (card) => {
                return card.benefits.reduce((sum, benefit) => sum + benefit.value, 0);
            };
            
            // Add at the top of AddCardPage function, after const [selectedCards...
            const cardImages = {
                'chase-sapphire-reserve': 'assets/cards/chase-sapphire-reserve.png',
                'chase-sapphire-preferred': 'assets/cards/chase-sapphire-preferred.jpg',
                'united-quest': 'assets/cards/united-quest.png',
                'world-of-hyatt': 'assets/cards/world-of-hyatt.jpg',
                'ihg-one-rewards': 'assets/cards/ihg-one-rewards.jpg',
                'amex-platinum': 'assets/cards/amex-platinum.jpg',
                'amex-gold': 'assets/cards/amex-gold.jpg',
                'amex-green': 'assets/cards/amex-green.jpg',
                'amex-business-platinum': 'assets/cards/amex-business-platinum.jpg',
                'amex-marriott-brilliant': 'assets/cards/amex-marriott-brilliant.jpg',
                'amex-hilton-aspire': 'assets/cards/amex-hilton-aspire.jpg',
                'amex-delta-reserve': 'assets/cards/amex-delta-reserve.jpg',
                'capital-one-venture-x': 'assets/cards/capital-one-venture-x.jpg',
                'capital-one-venture': 'assets/cards/capital-one-venture.jpg',
                'capital-one-savor': 'assets/cards/capital-one-savor.jpg',
                'citi-prestige': 'assets/cards/citi-prestige.jpg',
                'citi-premier': 'assets/cards/citi-premier.jpg',
                'citi-aadvantage-executive': 'assets/cards/citi-aadvantage-executive.jpg',
                'wells-fargo-autograph': 'assets/cards/wells-fargo-autograph.jpg',
                'bofa-premium-rewards': 'assets/cards/bofa-premium-rewards.jpg'
            };
            
            return (
                <div className="min-h-screen bg-gray-100 dark:bg-gray-900">
                    <header className="bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-10">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <button
                                        onClick={onBack}
                                        className="flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors"
                                    >
                                        <span className="text-xl">â†</span>
                                        <span>Back to Dashboard</span>
                                    </button>
                                    <h1 className="text-3xl font-bold text-gray-900 dark:text-white">Add Credit Cards</h1>
                                </div>
                                <div className="flex items-center gap-4">
                                    <span className="text-sm text-gray-600 dark:text-gray-400">
                                        {selectedCards.size} card{selectedCards.size !== 1 ? 's' : ''} selected
                                    </span>
                                    <button
                                        onClick={handleAddSelected}
                                        disabled={selectedCards.size === 0}
                                        className={`px-6 py-2 rounded-md font-medium transition-colors ${
                                            selectedCards.size > 0
                                                ? 'bg-green-600 text-white hover:bg-green-700'
                                                : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                        }`}
                                    >
                                        Add Selected Cards
                                    </button>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        {Object.keys(groupedCards).length === 0 ? (
                            <div className="text-center py-16">
                                <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-4">All Available Cards Added</h2>
                                <p className="text-gray-600 dark:text-gray-400 mb-6">You've already added all available premium credit cards to your collection.</p>
                                <button
                                    onClick={onBack}
                                    className="px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-medium"
                                >
                                    Back to Dashboard
                                </button>
                            </div>
                        ) : (
                            Object.entries(groupedCards).map(([issuer, cards]) => (
                                <div key={issuer} className="mb-12">
                                    <div className="flex items-center gap-3 mb-6">
                                        <div className={`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-xl ${
                                            issuer === 'Chase' ? 'bg-blue-600' :
                                            issuer === 'American Express' ? 'bg-gray-600' :
                                            issuer === 'Capital One' ? 'bg-red-600' :
                                            issuer === 'Citi' ? 'bg-blue-800' :
                                            issuer === 'Wells Fargo' ? 'bg-green-600' :
                                            issuer === 'Bank of America' ? 'bg-red-700' : 'bg-indigo-600'
                                        }`}>
                                            {issuer[0]}
                                        </div>
                                        <h2 className="text-2xl font-bold text-gray-900 dark:text-white">
                                            {issuer} Cards
                                        </h2>
                                    </div>
                                    <hr className="mb-6 border-gray-200 dark:border-gray-700" />
                                    <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                                        {cards.map(card => (
                                            <div
                                                key={card.id}
                                                className={`relative bg-white dark:bg-gray-800 rounded-lg border-2 transition-all duration-200 hover:shadow-lg cursor-pointer ${
                                                    selectedCards.has(card.id)
                                                        ? 'border-green-500 bg-green-50 dark:bg-green-900/20'
                                                        : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'
                                                }`}
                                                onClick={() => handleCardToggle(card.id)}
                                            >
                                                {selectedCards.has(card.id) && (
                                                    <div className="absolute top-3 right-3 bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm">
                                                        âœ“
                                                    </div>
                                                )}
                                                
                                                <div className={`${card.color} text-white rounded-t-lg p-4`}>
                                                    <h3 className="text-lg font-bold mb-1">{card.name}</h3>
                                                    <p className="text-white/80 text-sm">Annual Fee: {formatCurrency(card.annualFee)}</p>
                                                </div>
                                                
                                                <div className="p-4 flex justify-center bg-white dark:bg-gray-800">
                                                    <img 
                                                        src={cardImages[card.id] || `https://via.placeholder.com/300x200?text=${encodeURIComponent(card.name)}`} 
                                                        alt={`${card.name} card`} 
                                                        className="w-full h-48 object-cover rounded-lg shadow-md"
                                                        loading="lazy"
                                                    />
                                                </div>
                                                
                                                <div className="p-4">
                                                    <div className="mb-4">
                                                        <p className="text-sm text-gray-600 dark:text-gray-400 mb-2">
                                                            {card.benefits.length} benefit{card.benefits.length !== 1 ? 's' : ''}
                                                        </p>
                                                        <p className="text-sm text-green-600 dark:text-green-400 font-semibold">
                                                            Total Value: {formatCurrency(totalBenefitValue(card))}
                                                        </p>
                                                    </div>
                                                    
                                                    <div className="space-y-2">
                                                        {card.benefits.slice(0, 3).map(benefit => (
                                                            <div key={benefit.id} className="flex items-center justify-between text-sm">
                                                                <span className="text-gray-700 dark:text-gray-300 truncate">{benefit.name}</span>
                                                                <span className="text-gray-500 dark:text-gray-400 font-medium ml-2">
                                                                    {formatCurrency(benefit.value)}
                                                                </span>
                                                            </div>
                                                        ))}
                                                        {card.benefits.length > 3 && (
                                                            <div className="text-xs text-gray-500 dark:text-gray-400 italic">
                                                                +{card.benefits.length - 3} more benefit{card.benefits.length - 3 !== 1 ? 's' : ''}
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            ))
                        )}
                    </main>
                </div>
            );
        }

        // Settings Page Component
        function SettingsPage({ onBack, onResetAll, onResetBenefitUsage }) {
            const [showResetAllModal, setShowResetAllModal] = useState(false);
            const [showResetBenefitsModal, setShowResetBenefitsModal] = useState(false);

            const handleResetAll = () => {
                onResetAll();
                setShowResetAllModal(false);
            };

            const handleResetBenefitUsage = () => {
                onResetBenefitUsage();
                setShowResetBenefitsModal(false);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900">
                    <header className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-lg border-b border-gray-200/50 dark:border-slate-700/50 sticky top-0 z-50">
                        <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <button
                                        onClick={onBack}
                                        className="flex items-center gap-2 text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors"
                                    >
                                        <span className="text-xl">â†</span>
                                        <span>Back to Dashboard</span>
                                    </button>
                                    <h1 className="text-2xl font-bold text-slate-900 dark:text-white">Settings</h1>
                                </div>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-200/50 dark:border-slate-700/50 p-6">
                            <h2 className="text-2xl font-bold text-slate-900 dark:text-white mb-6">Data Management</h2>
                            
                            <div className="space-y-6">
                                {/* Reset Benefit Usage */}
                                <div className="border border-slate-200 dark:border-slate-700 rounded-lg p-6">
                                    <h3 className="text-lg font-semibold text-slate-900 dark:text-white mb-2">Reset Benefit Usage</h3>
                                    <p className="text-slate-600 dark:text-slate-400 mb-4">
                                        This will reset all benefit usage states (used, subscribed, activated) back to their default values. 
                                        Your cards will remain, but all benefits will be marked as unused.
                                    </p>
                                    <button
                                        onClick={() => setShowResetBenefitsModal(true)}
                                        className="px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors font-medium"
                                    >
                                        Reset Benefit Usage
                                    </button>
                                </div>

                                {/* Reset All Data */}
                                <div className="border border-red-200 dark:border-red-700 rounded-lg p-6 bg-red-50 dark:bg-red-900/20">
                                    <h3 className="text-lg font-semibold text-red-900 dark:text-red-300 mb-2">Reset All Data</h3>
                                    <p className="text-red-700 dark:text-red-400 mb-4">
                                        <strong>Warning:</strong> This will permanently delete all your data including cards and benefit usage. 
                                        This action cannot be undone.
                                    </p>
                                    <button
                                        onClick={() => setShowResetAllModal(true)}
                                        className="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors font-medium"
                                    >
                                        Reset All Data
                                    </button>
                                </div>

                                {/* Data Info */}
                                <div className="border border-slate-200 dark:border-slate-700 rounded-lg p-6">
                                    <h3 className="text-lg font-semibold text-slate-900 dark:text-white mb-2">Data Storage</h3>
                                    <p className="text-slate-600 dark:text-slate-400 text-sm">
                                        Your data is stored locally in your browser. No information is sent to any external servers. 
                                        Data persists until you clear your browser data or use the reset functions above.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </main>

                    {/* Reset All Data Modal */}
                    {showResetAllModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full">
                                <h3 className="text-lg font-semibold text-slate-900 dark:text-white mb-4">Confirm Reset All Data</h3>
                                <p className="text-slate-600 dark:text-slate-400 mb-6">
                                    Are you sure you want to delete all your data? This will remove all cards and benefit usage history. 
                                    This action cannot be undone.
                                </p>
                                <div className="flex gap-3 justify-end">
                                    <button
                                        onClick={() => setShowResetAllModal(false)}
                                        className="px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors"
                                    >
                                        Cancel
                                    </button>
                                    <button
                                        onClick={handleResetAll}
                                        className="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors font-medium"
                                    >
                                        Yes, Reset All Data
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Reset Benefit Usage Modal */}
                    {showResetBenefitsModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full">
                                <h3 className="text-lg font-semibold text-slate-900 dark:text-white mb-4">Confirm Reset Benefit Usage</h3>
                                <p className="text-slate-600 dark:text-slate-400 mb-6">
                                    Are you sure you want to reset all benefit usage? This will mark all benefits as unused 
                                    but keep your cards. This action cannot be undone.
                                </p>
                                <div className="flex gap-3 justify-end">
                                    <button
                                        onClick={() => setShowResetBenefitsModal(false)}
                                        className="px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-md hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors"
                                    >
                                        Cancel
                                    </button>
                                    <button
                                        onClick={handleResetBenefitUsage}
                                        className="px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors font-medium"
                                    >
                                        Yes, Reset Benefit Usage
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        function App() {
            const [cards, setCards] = useState(() => {
                const saved = localStorage.getItem('creditCardBenefits');
                if (saved) {
                    return JSON.parse(saved);
                }
                return [];
            });
            const [viewMode, setViewMode] = useState('unused'); // 'card', 'list', 'unused'
            const [currentPage, setCurrentPage] = useState('dashboard'); // 'dashboard', 'add-cards', 'settings'

            // Add dark mode state
            const [isDarkMode, setIsDarkMode] = useState(() => localStorage.getItem('darkMode') === 'true');

            // Add state for recently used benefits
            const [recentlyUsed, setRecentlyUsed] = useState(new Set());
            const [undoableUsed, setUndoableUsed] = useState(new Set());

            useEffect(() => {
                localStorage.setItem('darkMode', isDarkMode);
            }, [isDarkMode]);

            // Add timer effect for recently used benefits
            useEffect(() => {
                if (recentlyUsed.size > 0) {
                    const timer = setTimeout(() => {
                        setRecentlyUsed(new Set());
                    }, 30000); // 30 seconds

                    return () => clearTimeout(timer);
                }
            }, [recentlyUsed.size > 0]);

            useEffect(() => {
                localStorage.setItem('creditCardBenefits', JSON.stringify(cards));
            }, [cards]);

            const handleToggle = (cardId, benefitId) => {
                setCards(prevCards => {
                    return prevCards.map(card => {
                        if (card.id === cardId) {
                            return {
                                ...card,
                                benefits: card.benefits.map(benefit => {
                                    if (benefit.id === benefitId) {
                                        if (benefit.type === BENEFIT_TYPE.SUBSCRIPTION) {
                                            // Track subscription toggle
                                            if (!benefit.subscribed) {
                                                setUndoableUsed(prev => new Set([...prev, benefitId]));
                                            }
                                            if (typeof gtag !== 'undefined') {
                                                gtag('event', 'subscription_toggle', {
                                                    card_name: card.name,
                                                    benefit_name: benefit.name,
                                                    action: benefit.subscribed ? 'unsubscribe' : 'subscribe'
                                                });
                                            }
                                            return { ...benefit, subscribed: !benefit.subscribed };
                                        } else if (benefit.type === BENEFIT_TYPE.CREDIT || benefit.type === BENEFIT_TYPE.ONE_TIME) {
                                            // Track benefit usage and add to recently used
                                            if (!benefit.used) {
                                                setRecentlyUsed(prev => new Set([...prev, benefitId]));
                                                setUndoableUsed(prev => new Set([...prev, benefitId]));
                                            }
                                            if (typeof gtag !== 'undefined') {
                                                gtag('event', 'benefit_used', {
                                                    card_name: card.name,
                                                    benefit_name: benefit.name,
                                                    benefit_value: benefit.value
                                                });
                                            }
                                            return { ...benefit, used: true };
                                        }
                                    }
                                    return benefit;
                                })
                            };
                        }
                        return card;
                    });
                });
            };

            // Add undo function
            const handleUndo = (cardId, benefitId) => {
                setCards(prevCards => {
                    return prevCards.map(card => {
                        if (card.id === cardId) {
                            return {
                                ...card,
                                benefits: card.benefits.map(benefit => {
                                    if (benefit.id === benefitId) {
                                        if (benefit.type === BENEFIT_TYPE.SUBSCRIPTION) {
                                            return { ...benefit, subscribed: false };
                                        } else if (benefit.type === BENEFIT_TYPE.CREDIT || benefit.type === BENEFIT_TYPE.ONE_TIME) {
                                            return { ...benefit, used: false };
                                        }
                                    }
                                    return benefit;
                                })
                            };
                        }
                        return card;
                    });
                });
                // Remove from recently used
                setRecentlyUsed(prev => {
                    const newSet = new Set(prev);
                    newSet.delete(benefitId);
                    return newSet;
                });
                // Remove from undoable used
                setUndoableUsed(prev => {
                    const newSet = new Set(prev);
                    newSet.delete(benefitId);
                    return newSet;
                });
            };

            const handleAddCard = (cardId) => {
                const newCard = JSON.parse(JSON.stringify(availableCards[cardId])); // Deep clone
                // Generate unique IDs for benefits to avoid conflicts
                newCard.benefits = newCard.benefits.map(benefit => ({
                    ...benefit,
                    id: `${cardId}-${benefit.id}-${Date.now()}`
                }));
                setCards(prevCards => [...prevCards, newCard]);
                
                // Track card addition
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'card_added', {
                        card_name: newCard.name,
                        card_issuer: newCard.issuer,
                        annual_fee: newCard.annualFee,
                        benefits_count: newCard.benefits.length
                    });
                }
            };

            const handleRemoveCard = (cardId) => {
                if (window.confirm('Are you sure you want to remove this card?')) {
                    const cardToRemove = cards.find(card => card.id === cardId);
                    setCards(prevCards => prevCards.filter(card => card.id !== cardId));
                    
                    // Track card removal
                    if (typeof gtag !== 'undefined' && cardToRemove) {
                        gtag('event', 'card_removed', {
                            card_name: cardToRemove.name,
                            card_issuer: cardToRemove.issuer
                        });
                    }
                }
            };

            // Reset functions
            const handleResetAll = () => {
                setCards([]);
                localStorage.removeItem('creditCardBenefits');
                
                // Track reset all
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'data_reset_all');
                }
            };

            const handleResetBenefitUsage = () => {
                setCards(prevCards => {
                    return prevCards.map(card => ({
                        ...card,
                        benefits: card.benefits.map(benefit => {
                            const resetBenefit = { ...benefit };
                            // Reset usage states to defaults
                            if (benefit.type === BENEFIT_TYPE.CREDIT || benefit.type === BENEFIT_TYPE.ONE_TIME) {
                                resetBenefit.used = false;
                            }
                            if (benefit.type === BENEFIT_TYPE.SUBSCRIPTION) {
                                resetBenefit.subscribed = false;
                            }
                            if (benefit.type === BENEFIT_TYPE.FEATURE) {
                                resetBenefit.activated = true; // Features are typically active by default
                            }
                            return resetBenefit;
                        })
                    }));
                });
                
                // Clear tracking states
                setRecentlyUsed(new Set());
                setUndoableUsed(new Set());
                
                // Track reset benefit usage
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'data_reset_benefits');
                }
            };

            const getAllBenefits = () => {
                return cards.flatMap(card => 
                    card.benefits.map(benefit => ({
                        ...benefit,
                        cardId: card.id,
                        cardName: card.name
                    }))
                );
            };

            const getUnusedBenefits = () => {
                return getAllBenefits().filter(benefit => 
                    (!benefit.used && !benefit.subscribed && benefit.type !== BENEFIT_TYPE.FEATURE) ||
                    recentlyUsed.has(benefit.id)
                );
            };

            if (currentPage === 'add-cards') {
                return (
                    <AddCardPage
                        onAddCard={handleAddCard}
                        onBack={() => setCurrentPage('dashboard')}
                        existingCardIds={cards.map(card => card.id)}
                    />
                );
            }

            if (currentPage === 'settings') {
                return (
                    <SettingsPage
                        onBack={() => setCurrentPage('dashboard')}
                        onResetAll={handleResetAll}
                        onResetBenefitUsage={handleResetBenefitUsage}
                    />
                );
            }

            return (
                <div className={`min-h-screen ${isDarkMode ? 'dark' : ''}`}>
                    <div className="bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 min-h-screen">
                        <header className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-lg border-b border-gray-200/50 dark:border-slate-700/50 sticky top-0 z-50">
                            <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                                <div className="flex flex-col gap-6">
                                    <div className="flex justify-between items-center">
                                        <div>
                                            <h1 className="text-2xl font-bold text-slate-900 dark:text-white">Credit Card Benefits</h1>
                                            <p className="text-sm text-slate-600 dark:text-slate-400 mt-1">Track and maximize your card rewards</p>
                                        </div>
                                        <button
                                            onClick={() => setIsDarkMode(!isDarkMode)}
                                            className="p-2.5 rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all duration-200"
                                        >
                                            {isDarkMode ? (
                                                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                                                </svg>
                                            ) : (
                                                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                                                </svg>
                                            )}
                                        </button>
                                    </div>
                                    
                                    {/* Enhanced Tab Navigation */}
                                    <div className="flex bg-slate-100/60 dark:bg-slate-700/60 p-1 rounded-xl backdrop-blur-sm">
                                        <button
                                            onClick={() => {
                                                setCurrentPage('dashboard');
                                                setViewMode('unused');
                                            }}
                                            className={`flex-1 px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 ${
                                                currentPage === 'dashboard' && viewMode === 'unused'
                                                    ? 'bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm'
                                                    : 'text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-slate-600/50'
                                            }`}
                                        >
                                            Benefit Lists
                                        </button>
                                        <button
                                            onClick={() => {
                                                setCurrentPage('dashboard');
                                                setViewMode('card');
                                            }}
                                            className={`flex-1 px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 ${
                                                currentPage === 'dashboard' && viewMode === 'card'
                                                    ? 'bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm'
                                                    : 'text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-slate-600/50'
                                            }`}
                                        >
                                            Card View
                                        </button>
                                        <button
                                            onClick={() => {
                                                setCurrentPage('add-cards');
                                                if (typeof gtag !== 'undefined') {
                                                    gtag('event', 'page_view', {
                                                        page_title: 'Add Cards',
                                                        page_location: 'add-cards'
                                                    });
                                                }
                                            }}
                                            className={`flex-1 px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 ${
                                                currentPage === 'add-cards'
                                                    ? 'bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm'
                                                    : 'text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-slate-600/50'
                                            }`}
                                        >
                                            Add Cards
                                        </button>
                                        <button
                                            onClick={() => {
                                                setCurrentPage('settings');
                                                if (typeof gtag !== 'undefined') {
                                                    gtag('event', 'page_view', {
                                                        page_title: 'Settings',
                                                        page_location: 'settings'
                                                    });
                                                }
                                            }}
                                            className={`flex-1 px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200 ${
                                                currentPage === 'settings'
                                                    ? 'bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm'
                                                    : 'text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-slate-600/50'
                                            }`}
                                        >
                                            Settings
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </header>

                        <main className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        {cards.length === 0 && (
                            <div className="text-center py-20">
                                <div className="mx-auto w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mb-6">
                                    <svg className="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                                    </svg>
                                </div>
                                <h2 className="text-2xl font-semibold text-slate-900 dark:text-white mb-3">No credit cards added yet</h2>
                                <p className="text-slate-600 dark:text-slate-400 mb-8 max-w-md mx-auto">Get started by adding your credit cards to track and maximize your benefits</p>
                                <button
                                    onClick={() => {
                                        setCurrentPage('add-cards');
                                        // Track first card addition intent
                                        if (typeof gtag !== 'undefined') {
                                            gtag('event', 'first_card_intent', {
                                                page_title: 'Add Cards',
                                                page_location: 'add-cards'
                                            });
                                        }
                                    }}
                                    className="inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
                                >
                                    <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                                    </svg>
                                    Add Your First Card
                                </button>
                            </div>
                        )}

                        {viewMode === 'card' && cards.map(card => (
                            <CreditCardSection
                                key={card.id}
                                card={card}
                                onToggle={handleToggle}
                                onRemove={handleRemoveCard}
                                onUndo={handleUndo}
                                recentlyUsed={recentlyUsed}
                                undoableUsed={undoableUsed}
                            />
                        ))}

                        {viewMode === 'unused' && (
                            <div className="space-y-8">
                                <div className="text-center">
                                    <h2 className="text-2xl font-bold text-slate-900 dark:text-white mb-2">Benefit Lists</h2>
                                    <p className="text-slate-600 dark:text-slate-400">Track and manage all your credit card benefits</p>
                                </div>
                                
                                {getAllBenefits().length === 0 ? (
                                    <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-200/50 dark:border-slate-700/50 p-12 text-center">
                                        <div className="mx-auto w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mb-4">
                                            <svg className="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                                            </svg>
                                        </div>
                                        <h3 className="text-lg font-semibold text-slate-900 dark:text-white mb-2">No benefits to track</h3>
                                        <p className="text-slate-600 dark:text-slate-400">Add some credit cards to start tracking benefits</p>
                                    </div>
                                ) : (
                                    <div className="space-y-6">
                                        {/* Unused Benefits Section */}
                                        {getUnusedBenefits().length > 0 && (
                                            <div>
                                                <h3 className="text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2">
                                                    <div className="w-3 h-3 bg-amber-500 rounded-full"></div>
                                                    Unused Benefits ({getUnusedBenefits().length})
                                                </h3>
                                                <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-200/50 dark:border-slate-700/50 overflow-hidden">
                                                    <table className="min-w-full">
                                                        <thead className="bg-slate-50/80 dark:bg-slate-700/80">
                                                            <tr>
                                                                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider">
                                                                    Benefit
                                                                </th>
                                                                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider">
                                                                    Card
                                                                </th>
                                                                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider">
                                                                    Expires
                                                                </th>
                                                                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider">
                                                                    Value
                                                                </th>
                                                                <th className="px-6 py-4 text-right text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider">
                                                                    Action
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody className="bg-white/50 dark:bg-slate-800/50 divide-y divide-slate-200/50 dark:divide-slate-700/50">
                                                            {getUnusedBenefits().map((benefit) => (
                                                                <BenefitCard
                                                                    key={`${benefit.cardId}-${benefit.id}`}
                                                                    benefit={benefit}
                                                                    cardId={benefit.cardId}
                                                                    cardName={benefit.cardName}
                                                                    onToggle={handleToggle}
                                                                    onUndo={handleUndo}
                                                                    isRecentlyUsed={recentlyUsed.has(benefit.id)}
                                                                    isUndoableUsed={undoableUsed.has(benefit.id)}
                                                                    viewMode="list"
                                                                />
                                                            ))}
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        )}

                                        {/* Used Benefits Section */}
                                        {getAllBenefits().filter(benefit => (benefit.used || benefit.subscribed || benefit.activated) && !recentlyUsed.has(benefit.id)).length > 0 && (
                                            <div>
                                                <h3 className="text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2">
                                                    <div className="w-3 h-3 bg-green-500 rounded-full"></div>
                                                    Used Benefits ({getAllBenefits().filter(benefit => (benefit.used || benefit.subscribed || benefit.activated) && !recentlyUsed.has(benefit.id)).length})
                                                </h3>
                                                <div className="bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-2xl shadow-xl border border-slate-200/50 dark:border-slate-700/50 overflow-hidden">
                                                    <table className="min-w-full">
                                                        <thead className="bg-slate-50/80 dark:bg-slate-700/80">
                                                            <tr>
                                                                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider">
                                                                    Benefit
                                                                </th>
                                                                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider">
                                                                    Card
                                                                </th>
                                                                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider">
                                                                    Expires
                                                                </th>
                                                                <th className="px-6 py-4 text-left text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider">
                                                                    Value
                                                                </th>
                                                                <th className="px-6 py-4 text-right text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider">
                                                                    Action
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody className="bg-white/50 dark:bg-slate-800/50 divide-y divide-slate-200/50 dark:divide-slate-700/50">
                                                            {getAllBenefits().filter(benefit => (benefit.used || benefit.subscribed || benefit.activated) && !recentlyUsed.has(benefit.id)).map((benefit) => (
                                                                <BenefitCard
                                                                    key={`${benefit.cardId}-${benefit.id}`}
                                                                    benefit={benefit}
                                                                    cardId={benefit.cardId}
                                                                    cardName={benefit.cardName}
                                                                    onToggle={handleToggle}
                                                                    onUndo={handleUndo}
                                                                    isRecentlyUsed={recentlyUsed.has(benefit.id)}
                                                                    isUndoableUsed={undoableUsed.has(benefit.id)}
                                                                    viewMode="list"
                                                                />
                                                            ))}
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                )}
                            </div>
                        )}
                        </main>

                        <footer className="bg-slate-800/80 dark:bg-slate-900/80 backdrop-blur-lg border-t border-slate-700/50 text-white py-8 mt-16">
                            <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                                <p className="text-sm text-slate-300">
                                    Track your credit card benefits and maximize your rewards.
                                </p>
                                <p className="text-xs mt-2 text-slate-400">
                                    Data is stored locally in your browser. No information is sent to any server.
                                </p>
                            </div>
                        </footer>
                    </div>
                </div>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
